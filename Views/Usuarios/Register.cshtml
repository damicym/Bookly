@model Bookly.Models.Usuarios

@{
    ViewBag.Title = "Registrarse";
}

<div class="registerPage primerElemento">
    <section class="registerLeft">
        <div class="registerLogo">
        </div>
        <h2 class="registerTitle">Creá tu cuenta gratis</h2>
        <p class="registerSubtitle">Empezá a intercambiar</p>
        <img src="/img/register_deco.webp" alt="Libros decorativos" class="registerDecoImg">
    </section>
    <section class="registerRight">
        <form asp-action="Register" method="post" autocomplete="off" class="registerForm">
            <div class="campo">
                <label for="DNI">Ingresá tu DNI</label>
                <input asp-for="DNI" id="DNI" placeholder="DNI" required autocomplete="off" />
            </div>
            <div class="campo">
                <label for="nombreComp">Ingresá tu nombre y apellido</label>
                <input asp-for="nombreComp" id="nombreComp" placeholder="Nombre Completo" required autocomplete="off" autofocus/>
            </div>
            <div class="campo">
                <label for="password">Crea tu contraseña</label>
                <input asp-for="password" type="password" id="password" placeholder="Contraseña" required autocomplete="off" />
            </div>
            <div class="campo">
                <label for="ano">Ingresá tu año de ciclo</label>
                <select id="ano" name="ano" required>
                    <option value="0">Selecciona un año</option>
                    <option value="1">7mo grado</option>
                    <option value="2">1er año</option>
                    <option value="3">2do año</option>
                    <option value="4">3er año</option>
                    <option value="5">4to año</option>
                    <option value="6">5to año</option>
                </select>
            </div>
            <div class="campo">
                <label for="especialidad">Ingresá tu especialidad</label>
                <select id="especialidad" name="especialidad">
                
                    <option value="">Selecciona un especialidad</option>
                    <option value="Informatica">Informática</option>
                    <option value="Gestión">Gestión</option>
                    <option value="Producción Artística">Producción Artística</option>
                    <option value="Química">Química</option>
                    <option value="Mecatrónica">Mecatrónica</option>
                    <option value="Construcciones">Construcciones</option>
                </select>
            </div>
            <div class="campo">
                <label for="curso">Ingresá tu división</label>
                <input asp-for="curso" id="curso" placeholder="Curso" maxlength="1" required autocomplete="off" />
            </div>
            <div class="campo">
                <label for="organizacion">Organización</label>
                <select id="organizacion" name="organizacion" disabled class="organizacion-disabled">
                <option value="ORT">ORT</option>
            </select>
                <small class="form-text org-info">Próximamente trabajaremos con más organizaciones</small>
             </div>
            <button type="submit" class="mainBtn">Registrarse</button>
            @if (ViewBag.Error != null)
            {
                <p style="color:red">@ViewBag.Error</p>
            }
            <p class="registerLogin">
                ¿Ya tenés una cuenta? <a href="@Url.Action("Login", "Usuarios")">Inicia sesión</a>
            </p>
        </form>
    </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const anoSelect = document.getElementById('ano');
    const especialidadSelect = document.getElementById('especialidad');

    function updateEspecialidadState() {
        // Permitir elegir especialidad solo si el año es 3ero o superior (valor 4 o más)
        const anoValue = parseInt(anoSelect.value, 10);
        if (anoValue >= 4) {
            especialidadSelect.disabled = false;
            especialidadSelect.classList.remove('especialidad-disabled');
        } else {
            especialidadSelect.disabled = true;
            especialidadSelect.classList.add('especialidad-disabled');
            especialidadSelect.value = ""; // Limpiar selección si se deshabilita
        }
    }

    anoSelect.addEventListener('change', updateEspecialidadState);
    // Actualizar estado al cargar la página
    updateEspecialidadState();
});
</script>
<style>
.especialidad-disabled {
    cursor: not-allowed;
    background: #eee;
}
</style>